---
title: LockdownApi.lockdownd_client_new_with_handshake method
---

Creates a new lockdownd client for the device and starts initial handshake. The handshake consists out of query_type, validate_pair, pair and start_session calls. It uses the internal pairing record management.

```csharp
public virtual LockdownError lockdownd_client_new_with_handshake(iDeviceHandle device, 
    out LockdownClientHandle client, string label)
```

| parameter | description |
| --- | --- |
| device | The device to create a lockdownd client for |
| client | The pointer to the location of the new lockdownd_client |
| label | The label to use for communication. Usually the program name. Pass NULL to disable sending the label in requests to lockdownd. |

## Return Value

LOCKDOWN_E_SUCCESS on success, LOCKDOWN_E_INVALID_ARG when client is NULL, LOCKDOWN_E_INVALID_CONF if configuration data is wrong

## Remarks

The device disconnects automatically if the lockdown connection idles for more than 10 seconds. Make sure to call lockdownd_client_free() as soon as the connection is no longer needed.

## See Also

* enum [LockdownError](../LockdownError.md)
* class [iDeviceHandle](../../iMobileDevice.iDevice/iDeviceHandle.md)
* class [LockdownClientHandle](../LockdownClientHandle.md)
* class [LockdownApi](../LockdownApi.md)
* namespace [iMobileDevice.Lockdown](../../iMobileDevice-net.md)

<!-- DO NOT EDIT: generated by xmldocmd for iMobileDevice-net.dll -->
